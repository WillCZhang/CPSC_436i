(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(46)},38:function(e,t,a){},44:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),i=a.n(l),o=(a(38),a(11)),s=a(12),c=a(14),A=a(13),u=a(15),m=a(16),d=a(8),h=a(31),g=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},p=(a(44),"addDetail"),f="addItem",E="cancelItem",b="changeStatus",v="clearAll",w="loadList",C="closeDetail",y="showDetail";var I=a(3);var O=function(){for(var e={Accept:"application/json","Content-Type":"application/json"},t={},a=0,n=["GET","POST","PUT","DELETE"];a<n.length;a++){var r=n[a];t[r]={method:r,headers:e}}return t}(),j=function(e){return e.text().then(function(t){var a=t&&JSON.parse(t);return e.ok?a:a&&a.msg||e.statusText}).catch(function(e){return Object(I.a)({},e,{code:400})})},k=a(28),Q=a.n(k),D={login:function(e,t,a){var n=Object(I.a)({},O.POST,{body:JSON.stringify({user:e,password:Q.a.encode(t)})});return fetch("/login",n).then(j).then(function(n){n&&200===n.code?(n.authdata=window.btoa(e+":"+t),localStorage.setItem("user",e),a(n)):alert(n.msg)})},logout:function(){localStorage.removeItem("user")},register:function(e,t,a){var n=Object(I.a)({},O.POST,{body:JSON.stringify({user:e,password:Q.a.encode(t)})});return fetch("/register",n).then(j).then(function(e){e&&200===e.code?a(e):alert(e.msg)})},getLoginUsername:function(){return localStorage.getItem("user")}};var N={getItems:function(e){var t=D.getLoginUsername();fetch("/user/"+t+"/list",O.GET).then(function(e){return e.json()}).then(e)},addItem:function(e,t,a){var n=Object(I.a)({},O.POST,{body:JSON.stringify({text:e,detail:t})}),r=D.getLoginUsername();return fetch("/user/"+r+"/list",n).then(j).then(a)},deleteItem:function(e){var t=D.getLoginUsername();fetch("/user/"+t+"/"+e,O.DELETE).then(j)},changeStatus:function(e){var t=D.getLoginUsername();fetch("/user/"+t+"/"+e,O.PUT).then(j)}};var M=a(4),S=Object(M.a)(),G=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(A.a)(t).call(this))).submit=function(){if(""!==e.title.current.value){N.addItem(e.title.current.value,e.detail.current.value,function(t){null===t.todo&&void 0===t.todo||e.props.loadList(t)}),e.title.current.value="",e.detail.current.value=""}else alert("Please enter something :)")},e.logout=function(){D.logout(),S.push("/login")},e.title=r.a.createRef(),e.detail=r.a.createRef(),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){N.getItems(this.props.loadList)}},{key:"todoText",value:function(e,t,a,n){var l=this,i=e+"text",o={title:t,detail:n};return a?r.a.createElement("li",{key:i,onClick:function(){return l.props.showDetail(o)},className:"text cross-out"},t):r.a.createElement("li",{key:i,onClick:function(){return l.props.showDetail(o)},className:"text"},t," ",a)}},{key:"doneButton",value:function(e,t){var a=this,n=e+"button";return t?r.a.createElement("li",{key:n,className:"done",onClick:function(){return a.props.finishItem(e)}},"Not Done"):r.a.createElement("li",{key:n,className:"done",onClick:function(){return a.props.finishItem(e)}},"Done")}},{key:"generateTodoListView",value:function(){var e=this,t=Object.values(this.props.list).map(function(t){return r.a.createElement("ul",{className:"horizontal",key:t.id+"list"},e.todoText(t.id,t.text,t.done,t.detail),e.doneButton(t.id,t.done),r.a.createElement("li",{key:t.id,className:"cancel",onClick:function(){return e.props.cancelItem(t.id)}},"Cancel"))}),a=r.a.createElement("div",{className:"center"},r.a.createElement("h3",null,"Your current todo list")),n=r.a.createElement("div",{className:"container center"},r.a.createElement("button",{className:"button-clear",onClick:function(){return e.props.clearAll()}},"Clear All"));return r.a.createElement("div",null,t.length>0?a:null,r.a.createElement("br",null),r.a.createElement("ul",null,t),r.a.createElement("br",null),r.a.createElement("br",null),t.length>0?n:null)}},{key:"generateDetailView",value:function(){var e=this;return r.a.createElement("div",{className:"container center"},r.a.createElement("h3",null,this.props.ui.title),r.a.createElement("h5",null,this.props.ui.detail),r.a.createElement("input",{type:"button",onClick:function(){return e.props.closeDetail()},value:"Close",className:"button button-clear"}))}},{key:"generateAddTodoItemView",value:function(){return r.a.createElement("form",null,r.a.createElement("input",{ref:this.title,type:"text",className:"text-line",placeholder:"Any todo item?"}),r.a.createElement("br",null),r.a.createElement("textarea",{ref:this.detail,className:"text-line text-small-font",rows:"5",cols:"30",placeholder:"Any details?"}),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:"Add",className:"button button-add",onClick:this.submit}))}},{key:"render",value:function(){var e=this.generateTodoListView(),t=this.generateDetailView();return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"Hi ",D.getLoginUsername(),"! What do you want to finish today?")),r.a.createElement("div",{className:"center"},this.generateAddTodoItemView()),r.a.createElement("br",null),r.a.createElement("br",null),this.props.ui.showDetail?t:e,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"center"},r.a.createElement("input",{type:"button",value:"Logout",className:"button button-add",onClick:this.logout})))}}]),t}(r.a.Component),B={addItem:function(e,t){return{type:f,text:e,detail:t}},finishItem:function(e){return{type:b,id:e}},cancelItem:function(e){return{type:E,id:e}},addDetail:function(e){return{type:p,id:e.id,detail:e.detail}},showDetail:function(e){return{type:y,title:e.title,detail:e.detail}},closeDetail:function(){return{type:C}},clearAll:function(){return{type:v}},loadList:function(e){return{type:w,list:e}}},x=Object(d.b)(function(e){return{list:e.list,ui:e.ui}},B)(G),J=a(10),K=a(9),U=a(17),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(A.a)(t).call(this,e))).state={username:"",password:"",submitted:!1},a.handleChange=a.handleChange.bind(Object(K.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(K.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(J.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=t.username,n=t.password;if(a&&n){D.login(a,n,function(){S.push("/")})}}},{key:"render",value:function(){var e=this.props.loggingIn,t=this.state,a=t.username,n=t.password,l=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(l&&!a?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:a,onChange:this.handleChange}),l&&!a&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(l&&!n?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:n,onChange:this.handleChange}),l&&!n&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"),e&&r.a.createElement("img",{alt:"login",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(U.a,{to:"/register",className:"btn btn-link"},"Register"))))}}]),t}(r.a.Component);var L=Object(d.b)(function(e){return{loggingIn:e.authentication}})(Y),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(A.a)(t).call(this,e))).state={user:{username:"",password:""},submitted:!1},a.handleChange=a.handleChange.bind(Object(K.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(K.a)(a)),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.user;this.setState({user:Object(I.a)({},r,Object(J.a)({},a,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user;if(t.username&&t.password){D.register(t.username,t.password,function(){S.push("/login")})}}},{key:"render",value:function(){var e=this.props.registering,t=this.state,a=t.user,n=t.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(n&&!a.username?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:a.username,onChange:this.handleChange}),n&&!a.username&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(n&&!a.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a.password,onChange:this.handleChange}),n&&!a.password&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),e&&r.a.createElement("img",{alt:"register",src:"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="}),r.a.createElement(U.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),t}(r.a.Component);var R=Object(d.b)(function(e){return{registering:e.registration}})(H),T=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",null,e.message&&r.a.createElement("div",{className:"alert ".concat(e.type)},e.message),r.a.createElement(m.c,{history:S},r.a.createElement("div",null,r.a.createElement(g,{exact:!0,path:"/",component:x}),r.a.createElement(m.b,{path:"/login",component:L}),r.a.createElement(m.b,{path:"/register",component:R}))))))}}]),t}(r.a.Component);var P=Object(d.b)(function(e){return{alert:e}})(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(18);function V(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{id:t,text:e,detail:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",done:a}}var W={showDetail:!1,title:"",detail:""},z=Object(F.b)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.type===f){var a=V(t.text,void 0,!1,t.detail);return Object(I.a)({},e,Object(J.a)({},a.id,a))}if(t.type===b)return N.changeStatus(t.id),Object(I.a)({},e,Object(J.a)({},t.id,V(e[t.id].text,t.id,!e[t.id].done,e[t.id].detail)));if(t.type===E){var n=Object(I.a)({},e);return N.deleteItem(t.id),delete n[t.id],n}if(t.type===p)return Object(I.a)({},e,Object(J.a)({},t.id,V(e[t.id].text,t.id,e[t.id].done,t.detail)));if(t.type===v){for(var r=0,l=Object.keys(e);r<l.length;r++){var i=l[r];N.deleteItem(i)}return{}}return t.type===w?function(e){var t={},a=!0,n=!1,r=void 0;try{for(var l,i=e.todo[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var o=l.value;t[o.id]=o}}catch(h){n=!0,r=h}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}var s=!0,c=!1,A=void 0;try{for(var u,m=e.done[Symbol.iterator]();!(s=(u=m.next()).done);s=!0){var d=u.value;t[d.id]=d}}catch(h){c=!0,A=h}finally{try{s||null==m.return||m.return()}finally{if(c)throw A}}return t}(t.list):e},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;if(t.type===y){var a=t.detail;return""===a&&(a="This item has no detail..."),{showDetail:!0,title:t.title,detail:a}}return t.type===C?W:e}});i.a.render(r.a.createElement(d.a,{store:Object(F.c)(z)},r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.d5b909c5.chunk.js.map